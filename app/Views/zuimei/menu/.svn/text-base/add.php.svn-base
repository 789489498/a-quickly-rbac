<?= View::get('layout.header') ?>

<?= View::get("qihoo.menu.pageheader") ?>

<div class="row">
  <div class="col-md-12">
    <form id="newactivityform" class="form-horizontal" action="<?= URL::route('Qihoo\MenuController@postAddAction') ?>" method="post">
    <div class="form-group">
        <label class="col-md-1 control-label">菜单名称</label>
        <input class="col-md-2 form-control input-small" type="text" name="name" id="name" value="" />
    </div>
    <div class="form-group">
        <label class="col-md-1 control-label">父级菜单</label>
        <select name="pid" class="col-md-2 form-control input-medium" id="pid">
            <option value="0" level="0">无 【选择"无"将新建一级菜单】</option>
            <?php foreach($pids as $menuId => $menu): ?>
            <option value="<?= $menuId ?>" id="select_pid_<?= $menuId ?>" level="<?= $menu["level"] ?>">【<?= $menu["level"] == 1 ? "一" : "二" ?>级菜单】<?= $menu["name"] ?></option>
            <?php endforeach; ?>
        </select>
    </div>
    <div class="form-group" id="div_type" style="display:none;">
        <label class="col-md-1 control-label">菜单类型</label>
        <select name="type" class="col-md-2 form-control input-large" id="type">
            <option value="0">节点 - 不直接指向路由，可以有子菜单</option>
            <option value="1">末端 - 直接指向路由，不可以有子菜单</option>
        </select>
    </div>
    <div class="form-group">
        <label class="col-md-1 control-label"></label>
        <button id="form_sub" type="submit" class="btn btn-info">提交</button>
    </div>
    </form>
  </div>
</div>

<script type="text/javascript">
$(function() {
    $("#pid").change(function() {
        var menuId = $(this).val();
        if ($("#select_pid_"+menuId).attr("level") == 1) {
            $("#div_type").show();
        } else {
            $("#div_type").hide();
        }
    });
})
</script>

<?= View::get('layout.footer') ?>
