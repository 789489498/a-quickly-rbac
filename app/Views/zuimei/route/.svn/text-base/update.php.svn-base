<?= View::get('layout.header') ?>

<?= View::get("qihoo.route.pageheader") ?>

<div class="row">
  <div class="col-md-12">

    <form id="newactivityform" class="form-horizontal" action="<?= URL::route('Qihoo\RouteController@postUpdateAction') ?>" method="post">
    <input type="hidden" name="id" id="id" value="<?= $route->id ?>" />
    <div class="form-group">
        <label class="col-md-1 control-label">名称</label>
        <input class="col-md-2 form-control input-medium" type="text" name="name" id="name" value="<?= $route->name ?>" />
    </div>
    <div class="form-group">
        <label class="col-md-1 control-label">路由</label>
        <input class="col-md-2 form-control input-medium" type="text" name="route" id="route" value="<?= $route->route ?>" />
    </div>
    <div class="form-group">
        <label class="col-md-1 control-label">一级菜单</label>
        <select class="col-md-2 form-control input-medium" id="mid_1" name="mid_1">
            <option selected='selected' value="0">无</option>
            <?php foreach($menu1 as $v): ?>
            <option value="<?= $v->id ?>" <?= $route->mid_1 == $v->id ? "selected=selected" : "" ?>><?= $v->name ?></option>
            <?php endforeach; ?>
        </select>
    </div>
    <div class="form-group">
        <label class="col-md-1 control-label">二级菜单</label>
        <select class="col-md-2 form-control input-medium" id="mid_2" name="mid_2">
            <option selected='selected' value="0">无</option>
            <?php foreach($menu2 as $v): ?>
            <option value="<?= $v->id ?>" class="mpid_<?= $v->pid ?> mlevel_2" <?= $v->pid == $route->mid_1 ? "" : "style=display:none;" ?> <?= $route->mid_2 == $v->id ? "selected=selected" : "" ?>><?= $v->name ?></option>
            <?php endforeach; ?>
        </select>
    </div>
    <div class="form-group">
        <label class="col-md-1 control-label">三级菜单</label>
        <select class="col-md-2 form-control input-medium" id="mid_3" name="mid_3">
            <option selected='selected' value="0">无</option>
            <?php foreach($menu3 as $v): ?>
            <option value="<?= $v->id ?>" class="mpid_<?= $v->pid ?> mlevel_3" <?= $v->pid == $route->mid_2 ? "" : "style=display:none;" ?> <?= $route->mid_3 == $v->id ? "selected=selected" : "" ?>><?= $v->name ?></option>
            <?php endforeach; ?>
        </select>
    </div>
    <div class="form-group">
        <label class="col-md-1 control-label">设置为默认页</label>
        <select class="col-md-2 form-control input-medium" name="is_default" class="uniformselect" id="is_default">
            <option value="0" <?= $route->is_default == 0 ? 'selected=selected' : '' ?>>否</option>
            <option value="1" <?= $route->is_default == 1 ? 'selected=selected' : '' ?>>是</option>
        </select>
    </div>
    <div class="form-group">
        <label class="col-md-1 control-label"></label>
        <button id="form_sub" type="submit" class="btn btn-info">提交</button>
    </div>
    </form>
  </div>
</div>
<script type="text/javascript">
$(function() {
    $("#mid_1").change(function() {
        var mid1 = $(this).val();
        $(".mlevel_2").hide();
        $(".mpid_"+mid1).show();
        $(".mlevel_3").hide();
    });
    $("#mid_2").change(function() {
        var mid2 = $(this).val();
        $(".mlevel_3").hide();
        $(".mpid_"+mid2).show();
    });
});
</script>

<?= View::get('layout.footer') ?>
